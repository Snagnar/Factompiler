# Test 13: Complex nested expressions and operator precedence
# Tests: deeply nested expressions, operator precedence, complex projections

Signal a = 100;
Signal b = 110;
Signal c = 120;

# Test operator precedence: * before +, && before ||
Signal precedence1 = a + b * c;         # Should be a + (b * c)  
Signal precedence2 = a > 0 && b > 0 || c > 0;  # Should be (a > 0 && b > 0) || c > 0

# Complex nested arithmetic with projections
Signal nested = ((a + b) * (c - 1)) / 2 | "iron-plate";

# Multiple projections and type coercion
Signal type_chain = a | "copper-plate";
Signal type_recast = type_chain | "steel-plate";

# Complex bundle operations
Bundle bundle1 = bundle(a, b);
Bundle bundle2 = bundle(c, a * 2);
Bundle bundle_math = (bundle1 + bundle2) * 3;

# Deeply nested bundle projections
Signal complex_projection = bundle(
    (a + b) | "iron-plate",
    (b * c) | "copper-plate"
) | "steel-plate";  # Should sum all channels to steel-plate

# Complex logical expressions
Signal complex_logic = (a > b && b > c) || (c > a && a > 0) || (b == 0 && c > 5);

# Conditional arithmetic using boolean results as multipliers
Signal conditional_value = 
    (a > 10) * 100 +
    (b > 20) * 200 + 
    (c > 30) * 300;

# Mixed bundle and single-channel operations
Signal mixed_result = a + bundle(b, c) + (a * 2) | "iron-ore";
