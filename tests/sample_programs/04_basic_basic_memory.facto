# Test 4: Memory operations and stateful logic
# Tests: Memory declaration, .read(), .write(), memory persistence

Memory counter: "signal-A";
counter.write((counter.read() + 1) % 100);

Memory checkpoint: "signal-B";
Signal at_checkpoint = counter.read() % 4 == 0;
checkpoint.write(counter.read() | "signal-B", when=at_checkpoint);

Entity pulse_lamp = place("small-lamp", 0, 0);
pulse_lamp.enable = checkpoint.read() < 50;